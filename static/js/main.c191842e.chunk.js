(this["webpackJsonpwhatsapp-clone"]=this["webpackJsonpwhatsapp-clone"]||[]).push([[0],{32:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a.n(n),s=a(33),r=a.n(s),i=(a(47),a(11)),l=(a(48),a(21)),o=a(6),u=(a(49),a(14)),j=a.n(u),d=a(19),m=a(34),h=a.n(m),b=a(36),p=a.n(b),f=a(25),O=a.n(f),v=a(37),g=a.n(v),x=(a(51),a(52),a(3));var N=function(e){var t=e.name,a=e.photoURL,n=e.email,c=e.lastMessage,s=Object(o.f)();return Object(x.jsxs)("div",{className:"user-profile",onClick:function(){var e;(e=n)&&s("/".concat(e))},children:[Object(x.jsx)("div",{className:"user-image",children:Object(x.jsx)("img",{src:a,alt:""})}),Object(x.jsxs)("div",{className:"user-info",children:[Object(x.jsx)("p",{className:"user-name",children:t}),c&&Object(x.jsx)("p",{className:"user-lastmessage",children:c})]})]})},S=a(20),U=S.a.initializeApp({apiKey:"AIzaSyA936godqop8o76zAEHZ-d769VmChfDflg",authDomain:"whatsapp-958b4.firebaseapp.com",projectId:"whatsapp-958b4",storageBucket:"whatsapp-958b4.appspot.com",messagingSenderId:"199438910368",appId:"1:199438910368:web:136673e4cbf240b55bdac5",measurementId:"G-G8E2YXL025"}),w=S.a.auth(),L=U.firestore(),y=new S.a.auth.GoogleAuthProvider,C=L;var k=function(e){var t=e.currentUser,a=e.signOut,c=Object(n.useState)([]),s=Object(i.a)(c,2),r=s[0],l=s[1],o=Object(n.useState)(""),u=Object(i.a)(o,2),m=u[0],b=u[1],f=Object(n.useState)([]),v=Object(i.a)(f,2),S=v[0],U=v[1];Object(n.useEffect)((function(){var e=function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.collection("users").onSnapshot((function(e){l(e.docs.filter((function(e){return e.data().email!==(null===t||void 0===t?void 0:t.email)})))}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.collection("Friendlist").doc(t.email).collection("list").onSnapshot((function(e){U(e.docs)}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),a()}),[]);var w=r.filter((function(e){if(m&&e.data().fullname.toLowerCase().includes(m.toLowerCase()))return e})).map((function(e){return Object(x.jsx)(N,{name:e.data().fullname,photoURL:e.data().photoURL,email:e.data().email},e.id)}));return Object(x.jsxs)("div",{className:"sidebar",children:[Object(x.jsxs)("div",{className:"sidebar-header",children:[Object(x.jsx)("div",{className:"sidebar-header-img",onClick:a,children:Object(x.jsx)("img",{src:null===t||void 0===t?void 0:t.photoURL,alt:""})}),Object(x.jsxs)("div",{className:"sidebar-header-btn",children:[Object(x.jsx)(h.a,{}),Object(x.jsx)(p.a,{}),Object(x.jsx)(O.a,{})]})]}),Object(x.jsx)("div",{className:"sidebar-search",children:Object(x.jsxs)("div",{className:"sidebar-search-input",children:[Object(x.jsx)(g.a,{}),Object(x.jsx)("input",{type:"text",name:"search",placeholder:"Search...",value:m,onChange:function(e){return b(e.target.value)}})]})}),Object(x.jsx)("div",{className:"sidebar-chat-list",children:w.length>0?w:S.map((function(e){return Object(x.jsx)(N,{name:e.data().fullname,photoURL:e.data().photoURL,lastMessage:e.data().lastMessage,email:e.data().email})}))})]})};var I=function(e){var t=e.currentUser,a=e.signOut;return Object(x.jsx)("div",{className:"home",children:Object(x.jsxs)("div",{className:"home-container",children:[Object(x.jsx)(k,{currentUser:t,signOut:a}),Object(x.jsx)("div",{className:"home-bg",children:Object(x.jsx)("img",{src:"./WhatsAppbg.png",alt:""})})]})})},R=(a(32),a(39)),E=a.n(R),D=a(40),A=a.n(D),M=a(41),F=a.n(M);a(63);var T=function(e){var t,a,n=e.message,c=e.time,s=e.sender;return Object(x.jsxs)("div",{className:"chat-message",style:{alignSelf:s===(null===w||void 0===w||null===(t=w.currentUser)||void 0===t?void 0:t.email)?"flex-end":"flex-start",backgroundColor:s===(null===w||void 0===w||null===(a=w.currentUser)||void 0===a?void 0:a.email)?"#dcf8c6":"#fff"},children:[Object(x.jsx)("div",{className:"chat-message-text",children:Object(x.jsx)("p",{children:n})}),Object(x.jsx)("div",{className:"chat-message-date",children:Object(x.jsx)("p",{children:new Date(c.toDate()).toLocaleString()})})]})},B=a(38),G=a.n(B);var J=function(e){var t=e.currentUser,a=Object(n.useState)(""),c=Object(i.a)(a,2),s=c[0],r=c[1],l=Object(n.useState)(!1),u=Object(i.a)(l,2),m=u[0],h=u[1],b=Object(o.g)().emailID,p=Object(n.useState)({}),f=Object(i.a)(p,2),v=f[0],g=f[1],N=Object(n.useRef)(null),U=Object(n.useState)([]),w=Object(i.a)(U,2),L=w[0],y=w[1];Object(n.useEffect)((function(){var e=function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.collection("users").doc(b).onSnapshot((function(e){g(e.data())}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.collection("chats").doc(b).collection("messages").orderBy("timeStamp","asc").onSnapshot((function(e){var a=e.docs.map((function(e){return e.data()})).filter((function(e){return e.senderEmail===(t.email||b)||e.receiverEmail===(t.email||b)}));y(a)}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),a()}),[b]),Object(n.useEffect)((function(){N.current.addEventListener("DOMNodeInserted",(function(e){var t=e.currentTarget;t.scroll({top:t.scrollHeight,behavior:"smooth"})}))}),[L]);var k=function(e){if(e.preventDefault(),b){var a={text:s,senderEmail:t.email,receiverEmail:b,timeStamp:S.a.firestore.Timestamp.now()};C.collection("chats").doc(t.email).collection("messages").add(a),C.collection("chats").doc(b).collection("messages").add(a),C.collection("Friendlist").doc(t.email).collection("list").doc(b).set({email:v.email,fullname:v.fullname,photoURL:v.photoURL,lastMessage:s}),C.collection("Friendlist").doc(b).collection("list").doc(t.email).set({email:t.email,fullname:t.fullname,photoURL:t.photoURL,lastMessage:s}),r("")}};return Object(x.jsxs)("div",{className:"chat-container",children:[Object(x.jsxs)("div",{className:"chat-container-header",children:[Object(x.jsxs)("div",{className:"chat-user-info",children:[Object(x.jsx)("div",{className:"chat-user-img",children:Object(x.jsx)("img",{src:null===v||void 0===v?void 0:v.photoURL,alt:""})}),Object(x.jsx)("p",{children:null===v||void 0===v?void 0:v.fullname})]}),Object(x.jsx)("div",{className:"chat-container-header-btn",children:Object(x.jsx)(O.a,{})})]}),Object(x.jsx)("div",{className:"chat-display-container",ref:N,children:L.map((function(e){return Object(x.jsx)(T,{message:e.text,time:e.timeStamp,sender:e.senderEmail})}))}),Object(x.jsxs)("div",{className:"chat-input",children:[m&&Object(x.jsx)(G.a,{onEmojiClick:function(e,t){return r(s+t.emoji)}}),Object(x.jsxs)("div",{className:"chat-input-btn",children:[Object(x.jsx)(E.a,{onClick:function(){return h(!m)}}),Object(x.jsx)(A.a,{})]}),Object(x.jsx)("form",{onSubmit:k,children:Object(x.jsx)("input",{type:"text",placeholder:"Type a Message",value:s,onChange:function(e){r(e.target.value)}})}),Object(x.jsx)("div",{className:"chat-input-send-btn",onClick:k,children:Object(x.jsx)(F.a,{})})]})]})};a(64);var P=function(e){var t=e.currentUser,a=e.signOut;return Object(x.jsx)("div",{className:"chatpage",children:Object(x.jsxs)("div",{className:"chatpage-container",children:[Object(x.jsx)(k,{currentUser:t,signOut:a}),Object(x.jsx)(J,{currentUser:t})]})})};a(65);var W=function(e){var t=e.setUser,a=Object(o.f)();return Object(x.jsx)("div",{className:"login",children:Object(x.jsxs)("div",{className:"login-container",children:[Object(x.jsx)("img",{className:"login-logo",src:"./whatsapp-logo.png",alt:""}),Object(x.jsx)("p",{className:"login-name",children:"WhatsApp Web"}),Object(x.jsxs)("button",{className:"login-btn",onClick:function(){w.signInWithPopup(y).then((function(e){var n={fullname:e.user.displayName,email:e.user.email,photoURL:e.user.photoURL};a("/"),t(n),localStorage.setItem("user",JSON.stringify(n)),C.collection("users").doc(e.user.email).set(n)})).catch((function(e){return alert(e.message)}))},children:[Object(x.jsx)("img",{src:"./google-logo.png",alt:"login with google"}),"Login with Google"]})]})})};var z=function(){var e=Object(n.useState)(JSON.parse(localStorage.getItem("user"))),t=Object(i.a)(e,2),a=t[0],c=t[1],s=function(){w.signOut().then((function(){c(null),localStorage.removeItem("user")})).catch((function(e){return alert(e.message)}))};return Object(x.jsx)(l.a,{children:Object(x.jsx)("div",{className:"App",children:a?Object(x.jsxs)(o.c,{children:[Object(x.jsx)(o.a,{path:"/:emailID",element:Object(x.jsx)(P,{currentUser:a,signOut:s})}),Object(x.jsx)(o.a,{path:"/",element:Object(x.jsx)(I,{currentUser:a,signOut:s})})]}):Object(x.jsx)(W,{setUser:c})})})},H=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,74)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))};r.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(z,{})}),document.getElementById("root")),H()}},[[67,1,2]]]);
//# sourceMappingURL=main.c191842e.chunk.js.map